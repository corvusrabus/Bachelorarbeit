 \section{NP-complete problems concerning Sullivan algebras}
 
 In this section we want to show the 
 $\NPcomplexity$ completeness of certain problems concerning Sullivan algebras. Later we shall see that these problems
 translate directly to topological problems. The Theorems and proofs in this section mainly follow  \cite{Lechuga2000}.
 
 We want our ground ring $R$ to be  $\Q$, hence we only consider rational Sullivan algebras.
 
 \begin{Definition}
  A Sullivan algebra $(\Lambda V, d)$ is called \emph{elliptic} if both $\pi^*(\Lambda V,d)$ and $H(\Lambda V,d)$ have
  finite dimension.
 \end{Definition}
 
 The first result we want to establish is the following:
 
 \begin{Theorem}[Lechuga, Murrilo]
 \label{thm:DecidingEllipticityIsNpHard}
  It is a $\NPcomplexity$-hard problem to decide if a given a Sullivan algebra $(\Lambda V,d)$ with $\pi^*(\Lambda V,d)$ finite dimensional 
  is elliptic . 
 \end{Theorem}
 
 \begin{Remark}
 \label{rem:CodingOfSullivanAlgebras}
  To be able to speak about complexity of computations involving Sullivan algebras we first have to fix a bit string 
  representation of a Sullivan algebra. However Sullivan algebras could have infinitely many generators and could therefore
  not be representable in a computer, thus we stick to minimal Sullivan algebras $\Sullivan$ where $V$ is finite dimensional. 
  We encode such an algebra $(\Lambda V, d)$ with $V \coloneqq \langle v_1, \ldots , v_n \rangle$
  by the following string: \newline
  Fix the smallest $c \in \N$ with $d(V) \subseteq \Lambda^{ \leq c} V$.
  At first we write a $n$-tuple of integers encoding the degrees of the $n$ generators and this is linear in the number
  of generators. Then we add for each $ 1 \leq i \leq n$
  and $d v_i = \sum_{q \leq c, (j_1, \ldots, j_q)} \lambda_{j_1, \ldots, j_q} v_{j_1} \cdots v_{j_q}$ all tuples 
  $(({j_1, \ldots, j_q}), \lambda_{j_1, \ldots, j_q})$ storing the indices and the (rational!) coefficient 
  $\lambda_{j_1, \ldots, j_q}$ (which is represented by $2$ integers)
  . Let $k$ be the number of integers stored in all these tuples. We have $n$ generators,
  ${ n \choose q}$ choices of $q$ generators out of $n$ and at most $c + 2$ integers per tuple. Therefore, we can bound $k$ by
  $k \leq (c + 2)m \sum_{q = 2}^c { n \choose q} $ and this is polynomial in $n$ for fixed $c$.
  Hence, if we consider $c$ as fixed then the representation has polynomial length in the number
  of generators.
  
 \end{Remark}
 %TODO Nochmal lesen ob das stimmt
 

 The next pages will be dedicated to proving \ref{thm:DecidingEllipticityIsNpHard}, we begin with 
 establishing a somehow technical Lemma:
 \begin{Lemma}
 \label{lma:IfAndOnlyIfNonTrivialMorphism}
  Let $\K$ be an algebraically closed field and $(\Lambda V,d)$ a minimal Sullivan
  algebra over $\K$ with finite dimensional $V = {\lbrace V^n \rbrace}_{n \geq 2}$. Then the following holds:\newline
  $H^*\Sullivan$ has finite dimension if and only if   
  the only morphism of differential graded algebras 
  $$ \varphi : \Sullivan \to (\K[\alpha],0) \; |\alpha| = 2 $$ 
  is the trivial one.
 \end{Lemma}

 \begin{proof}
 
  
  We first show ``$\implies$''. A slight modification of Proposition \ref{prop:WellBehavedFiltrations} tells us that we can 
  choose a basis $v_1, \ldots , v_n$ of $V$ such that $d v_i \in \Lambda \langle v_1, \ldots, v_{i-1} \rangle$.
  Next, if we are given a morphism  $ \varphi : \Sullivan \to (\K[\alpha],0) \; |\alpha| = 2 $, we want to show by induction over $k$ that
  $\varphi$ is zero on $v_1 , \ldots, v_k$. Let us assume that $\varphi$ is zero on $v_1, \ldots, v_{k-1}$ then take the
  subalgebra of $\Sullivan$ by factoring out $v_1, \ldots, v_{k-1}$ and consider the induced morphism 
  $\bar{\varphi} \colon (\Lambda \langle \bar{x}_k, \ldots, \bar{x}_n \rangle , \bar{d}) \to (\K[\alpha],0) $
  (note that $\bar{d}(\bar{x}_k) = 0$ by the  choice of basis) . Since $\K[\alpha]$ is zero in odd degrees,
  it follows that $\varphi(x_k) = 0$ for $|x_k|$ odd. Let us now look at $|x_k|$ even,
  it follows from \cite{Felix2001} ( Proposition 32.4 and Theorem 29.5) that %TODO Hier die Zitierung auf den Satz in der Arbeit ändern,falls ich das noch beweise
  $(\Lambda \langle \bar{x}_k, \ldots, \bar{x}_n \rangle , \bar{d})$ has finite category which gives us  $m \in \N$ and the
  following commuting diagram
  
  \centerline {
  \xymatrix{
    (\Lambda \langle \bar{x}_k, \ldots, \bar{x}_n \rangle , \bar{d}) \ar@/^/[r]^(.45){\lambda_m} \ar[rd]_{\pi_m}	& 	
    (\Lambda \langle \bar{x}_k, \ldots, \bar{x}_n \rangle \otimes \Lambda Z(m) , d) 
    \ar[d]^{\zeta_m}_{\simeq} \ar@/^/[l]^{i_m} \\
    & (\Lambda \langle \bar{x}_k, \ldots, \bar{x}_n \rangle / 
    \Lambda^{> m} \langle \bar{x}_k, \ldots, \bar{x}_n \rangle, \tilde{d})
  }
  }
  This allows us to show that $\bar{x}_k^m$ is a coboundary as follows:
  Since the diagram commutes 
  $$0 = \pi_m(\bar{x}_k^m) =   \zeta_m (\lambda_m (\bar{x}_k^m))$$ 
  holds. Since $\zeta_m$ is a quasi isomorphism (and $\bar{x}_k^m$ a cocycle), we get that $\lambda_m (\bar{x}_k)$ is a coboundary and
  therefore also $ i_m (\lambda_m (\bar{x}_k^m)) = \bar{x}_k^m$. Coboundaries get mapped to coboundaries and the only coboundary
  in $(\K[\alpha], 0)$ is zero, therefore 
  $(\bar{\varphi}(\bar{x}_k))^m = \bar{\varphi}(\bar{x}_k^m) = 0$. Thus also ( since $\K[\alpha]$ is a domain)
  $$ 0 = \bar{\varphi}(\bar{x}_k) = \varphi( x_k)$$
  Note that the construction above also works for $k = 1$. \\
  
  In contrary, consider that $H^*\Sullivan$ has infinite dimension, then by \ref{prop:EquivalenceFiniteDimensionCategoryCohomology}
  ~$H(V, d_{\sigma})$ has infinite dimension and by \ref{prop:FiniteDimensionDependentOnDegreeOne} ~$H_0(V, d_{\sigma})$ has
  infinite dimension. Let ${V^{even} = \langle y_1, \ldots , y_q \rangle}$ and 
  ${V^{odd} = \langle x_1 , \ldots , x_p \rangle}$ and write
  $f_i = d_{\sigma} x_i$. Since $(\Lambda V, d_{\sigma})$ is pure we know that all $f_i$ are 
  polynomials in $y_1, \ldots , y_q$ and they generate $d(V^{odd})$. This implies 
  $H_0(\Lambda V,d_{\sigma}) = V^{even} / I$ for $I \coloneqq (f_1, \ldots, f_p)$ which is a proper ideal since otherways
  $H_0(\Lambda V,d_{\sigma})$ would be zero. Again using the infinite dimension of 
  $H_0(\Lambda V,d_{\sigma})$ we observe that there is $y_{i_0}$ such that
  $y_{i_0}^k \notin I$ for all $k \in \N$. Next we consider the extended algebra 
  $\Lambda \langle y_1, \ldots, y_q, u \rangle$ with $|u| = - |y_{i_o}|$ and its ideal 
  $J \coloneqq (f_1, \ldots, f_p, u y_{i_0} - 1)$ which is proper since I is proper.
  The Hilbert Nullstellensatz (in the version of \cite{Lang2002} Theorem IX.1.4; note that we need algebraically closed here!)
   gives us a tupel 
  $(\lambda_1, \ldots, \lambda_q, \lambda) \in \K^{q+1}$ which is a root of all polynomials in $J$,
  i.e.\ $f_i(\lambda_1, \ldots, \lambda_q) = 0$ and $\lambda \lambda_{i_0} = 1$, in particular 
  $\lambda_{i_0} \neq 0$. We use this tuple to define the following morphism:
  $$ \bar{\varphi} \colon  \Lambda \langle y_1, \ldots, y_q \rangle \to \K[\alpha]
  \qquad y_i \mapsto \lambda_i \alpha^{\frac{|y_1]}{2}}$$
  which is non trivial since $\lambda_{i_0} \neq 0$. Consider the ideal $\tilde{I}$ generated by 
  $V^{odd}$ and $im \, d$ and let $\pi \colon \Sullivan \to (\Lambda V / \tilde{I} , 0) 
  \cong \Lambda \langle y_1, \ldots, y_q \rangle $ be the projection. Then 
  ${ \bar{\varphi} \circ \pi \colon \Sullivan \to (\K[\alpha], 0)}$ is a non trivial morphism.
 \end{proof}
 
 \begin{Remark}
  In \ref{lma:IfAndOnlyIfNonTrivialMorphism} it is necessary that $\K$ is algebraically closed 
  as we can see in the following example: \newline
  Consider the rational Sullivan algebra $(\Lambda \langle a, b, c \rangle,d)$ with $|a| = |b| = 2$, $|c| = 3$,
  $da = db = 0$ and $dc = a^2 + b^2$. It has infinite dimensional homology since $ [a^i]$ is a non-zero homology
  class for all $i \in \N$. Further, the only morphism $\varphi \Sullivan \to (\Q[\alpha], 0)$ with $|\alpha| = 2$ is the
  trivial one since $\varphi (a) = \lambda_a \alpha$, $\varphi (b) = \lambda_b \alpha$ implies 
  $ 0 = d\varphi (c) = \varphi(dc) = \varphi( a^2 + b^2) = (\lambda_a^2 + \lambda_b^2) \alpha$.
  
 \end{Remark}

 The main idea to prove Theorem \ref{thm:DecidingEllipticityIsNpHard} is to reduce $k$-COLOUR to deciding if $(\Lambda V,d)$ is elliptic for some special 
 Sullivan algebra $(\Lambda V,d)$ which we will construct as follows: \\
 
 \begin{Construction}
 \label{constructionOfSullivanAlgebra}
 Let $G = (V,E)$ be an undirected, simple, connected, finite graph with vertices $ V = \lbrace v_1, \dotsc , v_n \rbrace $
 and edges $ E = \lbrace (v_r, v_s) \; | \; (r,s) \in J \rbrace$. From this we construct for a given $k \in \N$ the following
 Sullivan algebra $(\Lambda V_{(G,k)} , d)$ : \\
 
 $ V^{even}_{(G,k)} \coloneqq \langle x_1, \dotsc , x_n \rangle $ \; with \; $|x_i| = 2$ \; for \; $ i = 1, \dotsc , n$ \; 
 and \; $dx_i \coloneqq 0$ \\
 
 $V^{odd}_{(G,k)} \coloneqq \langle y_{(r,s)} \rangle$ , $(r,s) \in J$ \; with \; $|y_{(r,s)}| = 2k - 3$ \; and \; $dy_{(r,s)} \coloneqq 
 \sum_{l = 1}^k x_r^{k -l} x_s^{l - 1}$ \\
 
 \end{Construction}

\begin{Remark}
 If $k \geq 3$ the differential of the $y_{(r,s)}$ contains no linear term, hence
  $(\Lambda V_{(G,k)} ,d)$ is minimal for $k \geq 3$. Furthermore, the construction above
  is for fixed $k$ polynomial in the number of vertices since the constructed vector space
  $V_{(G,k)}$ has as many generators as $G$ has vertices and Remark \ref{rem:CodingOfSullivanAlgebras}
  shows that the representation of $(\Lambda V_{(G,k)} ,d)$ is polynomial in $dim \, V_{(G,k)}$.

  
\end{Remark}


%  
%  \begin{Remark}
%   Note that the construction above is polynomial.
%  \end{Remark}

\begin{Lemma}
\label{lma:cohomoly+equations}
 $H^*(\Lambda V_{(G,k)}, d)$ has infinite dimension $\iff$ The system of equations \\
 \begin{equation}
 \label{systemofequations}
 {\lbrace \sum_{l = 1}^k u_r^{k - l} u_s^{l - 1} = 0 \; | \; (r,s) \in J \rbrace}  
 \end{equation}
 
 has a non trivial solution 
 $(\lambda_1 , \dotsc, \lambda_n) \in \C^n$
\end{Lemma}

\begin{proof}
 First observe that $(\Lambda V_{(G,k)}, d)$ has infinite dimensional homology as $\Q$-algebra iff 
 $(\Lambda V_{(G,k)}, d) $ has infinite dimensional homology as $\C$-algebra. This follows directly from 
 the universal coefficient theorem for cohomology and allows us to treat $(\Lambda V_{(G,k)}, d)$ as a $\C$-algebra
 from now on.
 From Lemma \ref{lma:IfAndOnlyIfNonTrivialMorphism} we know that $(\Lambda V_{(G,k)},d)$  has infinite dimension if and only if 
 there is a non trivial morphism of differential graded algebras \\
 ${\varphi \colon (\Lambda V_{(G,k)},d) \to ( \C [\alpha] ,\acute{d} = 0)}$ with $|\alpha| = 2$. How can such a morphism look like?
 Clearly $\varphi(x_i) = \lambda_i \alpha$ for some $\lambda_i \in \C$ and $\varphi(y_{(r,s)}) = 0$ for all $(r,s) \in J$ , since 
 $(\C [\alpha] , 0)$ is zero in odd degrees. Furthermore, $\varphi$ must commute with the differentials, hence 
 for all $(r,s) \in J$
 $$ 0 = \acute{d} \varphi(y_{(r,s)}) = \varphi(dy_{(r,s)}) = \varphi(\sum_{l = 1}^k x_r^{k -l} x_s^{l - 1})
 = \sum_{l = 1}^k \varphi(x_r)^{k -l} \varphi(x_s)^{l - 1}$$
 
 This shows that $(\varphi(x_i))_{i = 1, \dotsc , n}$ must be a solution of \ref{systemofequations}, which is non trivial
 if $\varphi$ is non trivial.
 This also works the other way round and every non trivial solution  $(\lambda_1 , \dotsc, \lambda_n)$ of \ref{systemofequations}
 can be used to define a non trivial morphism $\varphi(x_i) = \lambda_i \alpha$.
 \end{proof}

 \begin{Theorem}
 \label{thm:KColourEquivalentToNonEllipticity}
  Let $k \geq 3$ then 
   $G = (V,E)$ is k-colourable $\iff$ $(\Lambda V_{(G,k)},d)$ is not elliptic
 \end{Theorem}

 \begin{proof}
  From the construction of $(\Lambda V_{(G,k)},d)$ we see that  $\pi^*(\Lambda V_{(G,k)},d)$ is finite dimensional, therefore
  we only have to care about its cohomology. Suppose now that $G$ is $k$-colourable and we have a colouring
  $f \colon V \to { \lbrace 1, \dotsc , k \rbrace }$ with $f(x_r) \neq f(x_s)$ for $(r,s) \in J$. Let $\zeta_k$ be a primitive 
  $k$-th root of unity, then for $(r,s) \in J$ it holds that
  
  $$ \sum_{l = 1}^k (\zeta_k^{f(x_r)})^{k-l} (\zeta_k^{f(x_s)})^{l-1}
  = \frac{(\zeta_k^{f(x_r)})^{k} - (\zeta_k^{f(x_s)})^{k}}{ \zeta_k^{f(x_r)} - \zeta_k^{f(x_s)}} = 0
  $$
  
  Hence $(\zeta_k^{f(x_i)})_{i = 1, \dotsc, n}$ defines a non trivial solution of \ref{systemofequations}
  and Lemma \ref{lma:cohomoly+equations} tells us that $(\Lambda V_{(G,k)},d)$ is not elliptic and this shows
  ``$\implies$''. \\
  Let now $(\Lambda V_{(G,k)},d)$ be not elliptic, then Lemma \ref{lma:cohomoly+equations} gives us a non trivial
  solution $(\lambda_1 , \dotsc, \lambda_n) \in \C^n$ of \ref{systemofequations}. We use this solution to construct
  a colouring of $G$. 
  We first observe that $\lambda_i \neq 0$ for all $i$, for this suppose that $\lambda_r = 0$ and let $(r,s) \in J$.
  We then have 
  $$0 =\sum_{l = 1}^k \lambda_r^{k -l} \lambda_s^{l - 1} = \lambda_s^{k-1}$$
  and hence $\lambda_s = 0$. Since G is connected this implies that all $\lambda_i$ are zero which is a
  contradiction to $(\lambda_1, \ldots, \lambda_n)$ being not trivial.
  
  Next we have
  for $(r,s) \in J$ that $ \lambda_r^k - \lambda_s^k = ( \lambda_r - \lambda_s) 
  \sum_{l = 1}^k \lambda_r^{k - l} \lambda_s^{l - 1} = 0$ . Since $G$ is connected we have 
  $\lambda_1^k = \dotsc = \lambda_n^k$ , which we can wlog assume to equal $1$. Therefore every $\lambda_i$ is a 
  $k$-th root of unity and we can define $f \colon V \to { \lbrace 1, \dotsc , k \rbrace }$ such that 
  $\lambda_i = \zeta_k^{f(x_i)}$. This $f$ now defines a colouring, because if we assume that for a $(i,j) \in J$
  $f(x_i) = f(x_j)$ holds we also get that 
  $$\sum_{l = 1}^k \lambda_i^{k - l} \lambda_j^{l - 1} = \sum_{l = 1}^k (\zeta_k^{f(x_i)})^{k-l} (\zeta_k^{f(x_j)})^{l-1}
  = \sum_{l = 1}^k (\zeta_k^{f(x_i)})^{k-1} = k (\zeta_k^{f(x_i)})^{k-1} \neq 0$$ 
  which is a contradiction to $(\lambda_1 , \dotsc, \lambda_n)$ being a solution of \ref{systemofequations}.
  
 \end{proof}

 Having this at hand, the proof of \ref{thm:DecidingEllipticityIsNpHard} is just combining the above lemmata but we 
 want to prove a even stronger result as follows:
 
 Denote by $\Gamma_k$ the class of minimal Sullivan algebras $\Sullivan$ with $V$ finite dimensional and
 $d(V) \subset \Lambda^{< k} V$. Then we prove
 
 \begin{Theorem}
  For a fixed integer $k \geq 3$, deciding if a Sullivan algebra $\Sullivan \in \Gamma_k$ is elliptic is $\NPcomplexity$-hard. 
 \end{Theorem}

 Clearly this directly implies \ref{thm:DecidingEllipticityIsNpHard}.
 \begin{proof}
  Fix $k \geq 3$ and note that $k$-COLOUR is still $\NPcomplexity$-hard if we restrict it to connected graphs (since different
  components of a graph can be coloured independently). So, given an undirected connected graph $G$ we use
  construction \ref{constructionOfSullivanAlgebra} and obtain the Sullivan algebra $(\Lambda V_{(G,k)},d)$ which lies
  in $\Gamma_k$ by construction. Further, by Remark \ref{rem:CodingOfSullivanAlgebras} this construction is polynomial
  in the number of vertices of $G$ and by Theorem \ref{thm:KColourEquivalentToNonEllipticity} deciding wether
  $(\Lambda V_{(G,k)},d)$ is elliptic is equivalent to deciding if $G$ is $k$-colourable and therefore this construction 
  is a polynomial time reduction.
 \end{proof}

 Next let us present another example of a $\NPcomplexity$-hard problem in topology, namely the computation
 of so called Betti numbers.
 
 \begin{Definition}
  Define the $p$-th \emph{Betti number} of a Sullivan algebra $\Sullivan$ as \newline 
  ${b_p \Sullivan \coloneqq dim \, H^p \Sullivan}$.
 \end{Definition}


 \begin{Theorem}
  The problem to decide for a given elliptic minimal Sullivan algebra $\Sullivan$ and $k \in \N$ if
  $b_k \Sullivan \neq 0$ is $\NPcomplexity$-hard.
 \end{Theorem}

 \begin{proof}
  We reduce the problem to SUBSETSUM in polynomial time to prove the claim.
  So, if we are given an instance $(x_1, \ldots, x_n, S)$ of SUBSETSUM we construct an elliptic minimal Sullivan
  algebra $\Sullivan$ as follows: \newline
  Let $x_1, \ldots, x_i$ be odd and $x_{i+1}, \ldots, x_n$ even. Define 
  $V \colon \langle v_1, \ldots, v_n, w_{i+1}, \ldots , w_n \rangle$ where $|v_i| = x_i$ and $|w_i| = 2x_i -1$.
  Specifiy the differential by $dx_i = 0$ and $dw_i = x_i^2$ (note that we shall later see that this defines 
  a minimal model of the space $S^{x_1} \times \ldots \times S^{x_n}$). The homology of this Sullivan algebra is given by:
   
  \begin{align*}
  H \Sullivan &\cong H \big{(} \big{(}\bigotimes_{j = 1}^i \Lambda \langle v_j \rangle , 0 \big{)} \;\otimes \;  
  \big{(} {\bigotimes}_{j=i + 1}^n \Lambda \langle v_{j} ,w_{j}\rangle , d \big{)} \big{)}  \\
  &\cong \big{(} \bigotimes_{j = 1}^i \Lambda \langle [v_j] \rangle , 0 \big{)}
  \; \otimes \;H \big{(}  {\bigotimes}_{j=i + 1}^n \Lambda \langle v_{j} ,w_{j}\rangle  , d\big{)}
  \end{align*}
  
  since homology commutes with tensor products (Künneth theorem). From this representation of the homology,
  we see that it is finite dimensional (hence $\Sullivan$ is elliptic) and 
  ${b_p(X) = \# {\lbrace T \subseteq (x_1, \ldots, x_n) | \sum_{x \in T} x = p \rbrace}}$.
  Thus, if we decide if $b_S \neq 0$ we also decide if the given instance$(x_1, \ldots, x_n, S)$ of SUBSETSUM
  has a solution. Furthermore, this reduction is polynomial in $n$ 
  (since we can fix $c$ from Remark \ref{rem:CodingOfSullivanAlgebras} as $c = 2$)
  and therefore in the length of the instance $(x_1, \ldots, x_n, S)$. 
 \end{proof}

 \begin{Corollary}
  Computing the betti numbers of a minimal elliptic Sullivan algebra is $\NPcomplexity$-hard.
 \end{Corollary}
